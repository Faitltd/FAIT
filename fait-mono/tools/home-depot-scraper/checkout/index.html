<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scraper Service - Purchase Credits</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        body {
            background-color: #f8f9fa;
            padding-top: 2rem;
        }
        .pricing-header {
            max-width: 700px;
        }
        .card-deck .card {
            min-width: 220px;
        }
        .border-top {
            border-top: 1px solid #e5e5e5;
        }
        .border-bottom {
            border-bottom: 1px solid #e5e5e5;
        }
        .box-shadow {
            box-shadow: 0 .25rem .75rem rgba(0, 0, 0, .05);
        }
        .btn-primary {
            background-color: #ff6b35;
            border-color: #ff6b35;
        }
        .btn-primary:hover {
            background-color: #e55a2b;
            border-color: #e55a2b;
        }
        .btn-outline-primary {
            color: #ff6b35;
            border-color: #ff6b35;
        }
        .btn-outline-primary:hover {
            background-color: #ff6b35;
            border-color: #ff6b35;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
            <h1 class="display-4">Scraper Service</h1>
            <p class="lead">Purchase credits to use our scraper service for Home Depot and Lowe's product data.</p>
        </div>

        <div class="row mb-3 text-center">
            <div class="col-md-4">
                <div class="card mb-4 box-shadow">
                    <div class="card-header">
                        <h4 class="my-0 font-weight-normal">Basic</h4>
                    </div>
                    <div class="card-body">
                        <h1 class="card-title pricing-card-title">$9.99</h1>
                        <ul class="list-unstyled mt-3 mb-4">
                            <li>100 Credits</li>
                            <li>~100 Product Scrapes</li>
                            <li>~20 Search Queries</li>
                            <li>~10 Category Scrapes</li>
                        </ul>
                        <button type="button" class="btn btn-lg btn-block btn-primary" onclick="checkout('basic')">Buy Now</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card mb-4 box-shadow">
                    <div class="card-header">
                        <h4 class="my-0 font-weight-normal">Standard</h4>
                    </div>
                    <div class="card-body">
                        <h1 class="card-title pricing-card-title">$19.99</h1>
                        <ul class="list-unstyled mt-3 mb-4">
                            <li>250 Credits</li>
                            <li>~250 Product Scrapes</li>
                            <li>~50 Search Queries</li>
                            <li>~25 Category Scrapes</li>
                        </ul>
                        <button type="button" class="btn btn-lg btn-block btn-primary" onclick="checkout('standard')">Buy Now</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card mb-4 box-shadow">
                    <div class="card-header">
                        <h4 class="my-0 font-weight-normal">Premium</h4>
                    </div>
                    <div class="card-body">
                        <h1 class="card-title pricing-card-title">$49.99</h1>
                        <ul class="list-unstyled mt-3 mb-4">
                            <li>1000 Credits</li>
                            <li>~1000 Product Scrapes</li>
                            <li>~200 Search Queries</li>
                            <li>~100 Category Scrapes</li>
                        </ul>
                        <button type="button" class="btn btn-lg btn-block btn-primary" onclick="checkout('premium')">Buy Now</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mb-5">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header">
                        <h4>Credit Usage</h4>
                    </div>
                    <div class="card-body">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Operation</th>
                                    <th>Credits</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Product Scrape</td>
                                    <td>1</td>
                                    <td>Get detailed information about a single product</td>
                                </tr>
                                <tr>
                                    <td>Search Query</td>
                                    <td>5</td>
                                    <td>Get search results for a specific query</td>
                                </tr>
                                <tr>
                                    <td>Category Scrape</td>
                                    <td>10</td>
                                    <td>Get all products in a specific category</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <footer class="pt-4 my-md-5 pt-md-5 border-top">
            <div class="row">
                <div class="col-12 col-md">
                    <small class="d-block mb-3 text-muted">&copy; 2023 Scraper Service</small>
                </div>
                <div class="col-6 col-md">
                    <h5>Features</h5>
                    <ul class="list-unstyled text-small">
                        <li><a class="text-muted" href="#">Home Depot Scraping</a></li>
                        <li><a class="text-muted" href="#">Lowe's Scraping</a></li>
                        <li><a class="text-muted" href="#">API Access</a></li>
                    </ul>
                </div>
                <div class="col-6 col-md">
                    <h5>Resources</h5>
                    <ul class="list-unstyled text-small">
                        <li><a class="text-muted" href="#">Documentation</a></li>
                        <li><a class="text-muted" href="#">API Reference</a></li>
                        <li><a class="text-muted" href="#">Support</a></li>
                    </ul>
                </div>
                <div class="col-6 col-md">
                    <h5>About</h5>
                    <ul class="list-unstyled text-small">
                        <li><a class="text-muted" href="#">Team</a></li>
                        <li><a class="text-muted" href="#">Privacy</a></li>
                        <li><a class="text-muted" href="#">Terms</a></li>
                    </ul>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Stripe publishable key
        const stripe = Stripe('pk_test_your_publishable_key');

        // Production API endpoint
        const API_URL = 'https://scraper-webhook-qlkvtyydjq-uc.a.run.app';

        async function checkout(planId) {
            try {
                // Create a checkout session on the server
                const response = await fetch(`${API_URL}/create-checkout-session`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        plan_id: planId,
                        base_url: window.location.origin
                    }),
                });

                const session = await response.json();

                if (session.error) {
                    alert('Error: ' + session.error);
                    return;
                }

                // Redirect to Stripe Checkout
                const result = await stripe.redirectToCheckout({
                    sessionId: session.id
                });

                if (result.error) {
                    alert(result.error.message);
                }
            } catch (error) {
                console.error('Error:', error);
                alert('An error occurred. Please try again.');
            }
        }
    </script>
</body>
</html>
