<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FAIT Co-op CSS Diagnostic Tool</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f7fafc;
      color: #333;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background-color: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1, h2, h3 {
      color: #2c3e50;
    }
    .panel {
      background-color: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 4px;
      padding: 15px;
      margin-bottom: 20px;
    }
    .code {
      font-family: monospace;
      background-color: #f1f1f1;
      padding: 2px 4px;
      border-radius: 3px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }
    th, td {
      border: 1px solid #dee2e6;
      padding: 8px 12px;
      text-align: left;
    }
    th {
      background-color: #e9ecef;
    }
    tr:nth-child(even) {
      background-color: #f2f2f2;
    }
    button {
      background-color: #4CAF50;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 4px;
      cursor: pointer;
      margin-right: 10px;
      margin-bottom: 10px;
    }
    button:hover {
      background-color: #45a049;
    }
    .results {
      max-height: 400px;
      overflow-y: auto;
      border: 1px solid #dee2e6;
      padding: 10px;
      margin-top: 10px;
    }
    .warning {
      color: #856404;
      background-color: #fff3cd;
      padding: 10px;
      border-radius: 4px;
      margin-bottom: 10px;
    }
    .error {
      color: #721c24;
      background-color: #f8d7da;
      padding: 10px;
      border-radius: 4px;
      margin-bottom: 10px;
    }
    .success {
      color: #155724;
      background-color: #d4edda;
      padding: 10px;
      border-radius: 4px;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>FAIT Co-op CSS Diagnostic Tool</h1>
    <p>This tool helps diagnose CSS and styling issues that might be causing rendering problems.</p>
    
    <div class="panel">
      <h2>CSS Stylesheet Analysis</h2>
      <button id="analyze-stylesheets">Analyze Stylesheets</button>
      <div id="stylesheet-results" class="results"></div>
    </div>
    
    <div class="panel">
      <h2>Element Visibility Check</h2>
      <button id="check-visibility">Check Element Visibility</button>
      <div id="visibility-results" class="results"></div>
    </div>
    
    <div class="panel">
      <h2>Z-Index Analysis</h2>
      <button id="analyze-zindex">Analyze Z-Index</button>
      <div id="zindex-results" class="results"></div>
    </div>
    
    <div class="panel">
      <h2>Root Element Diagnostic</h2>
      <button id="diagnose-root">Diagnose Root Element</button>
      <div id="root-results" class="results"></div>
    </div>
    
    <div class="panel">
      <h2>React Rendering Test</h2>
      <p>This will attempt to render a simple React component to test if React is working.</p>
      <button id="test-react">Test React Rendering</button>
      <div id="react-test-container"></div>
      <div id="react-results" class="results"></div>
    </div>
    
    <div class="panel">
      <h2>CSS Reset Test</h2>
      <p>This will temporarily reset CSS to see if styling is causing the black screen.</p>
      <button id="reset-css">Reset CSS</button>
      <button id="restore-css">Restore CSS</button>
      <div id="reset-results" class="results"></div>
    </div>
  </div>

  <script>
    // Stylesheet Analysis
    document.getElementById('analyze-stylesheets').addEventListener('click', function() {
      const results = document.getElementById('stylesheet-results');
      results.innerHTML = '<p>Analyzing stylesheets...</p>';
      
      try {
        const styleSheets = document.styleSheets;
        let output = `<p>Found ${styleSheets.length} stylesheets:</p><table>`;
        output += '<tr><th>Index</th><th>Source</th><th>Rules</th><th>Potential Issues</th></tr>';
        
        let totalRules = 0;
        let potentialIssues = 0;
        
        for (let i = 0; i < styleSheets.length; i++) {
          const sheet = styleSheets[i];
          const source = sheet.href || 'Inline Style';
          let ruleCount = 0;
          let issues = [];
          
          try {
            const rules = sheet.cssRules || sheet.rules;
            ruleCount = rules.length;
            totalRules += ruleCount;
            
            for (let j = 0; j < rules.length; j++) {
              const rule = rules[j];
              if (rule.selectorText) {
                // Check for potentially problematic rules
                if (rule.style.display === 'none' || 
                    rule.style.visibility === 'hidden' || 
                    rule.style.opacity === '0' ||
                    rule.style.backgroundColor === 'black' ||
                    rule.style.color === 'black' && rule.style.backgroundColor === 'black') {
                  issues.push(`${rule.selectorText}: ${rule.cssText.substring(0, 50)}...`);
                  potentialIssues++;
                }
              }
            }
          } catch (e) {
            issues.push(`Error accessing rules: ${e.message}`);
          }
          
          output += `<tr>
            <td>${i + 1}</td>
            <td>${source}</td>
            <td>${ruleCount}</td>
            <td>${issues.length > 0 ? issues.join('<br>') : 'None'}</td>
          </tr>`;
        }
        
        output += '</table>';
        output += `<p>Total rules: ${totalRules}</p>`;
        output += `<p>Potential issues found: ${potentialIssues}</p>`;
        
        if (potentialIssues > 0) {
          output += `<div class="warning">Found ${potentialIssues} rules that might affect visibility.</div>`;
        } else {
          output += `<div class="success">No obvious CSS issues found.</div>`;
        }
        
        results.innerHTML = output;
      } catch (e) {
        results.innerHTML = `<div class="error">Error analyzing stylesheets: ${e.message}</div>`;
      }
    });
    
    // Element Visibility Check
    document.getElementById('check-visibility').addEventListener('click', function() {
      const results = document.getElementById('visibility-results');
      results.innerHTML = '<p>Checking element visibility...</p>';
      
      try {
        const allElements = document.querySelectorAll('*');
        let hiddenElements = [];
        let largeElements = [];
        const viewportWidth = window.innerWidth;
        const viewportHeight = window.innerHeight;
        
        for (let i = 0; i < allElements.length; i++) {
          const element = allElements[i];
          const style = window.getComputedStyle(element);
          
          // Check for hidden elements
          if (style.display === 'none' || style.visibility === 'hidden' || style.opacity === '0') {
            hiddenElements.push({
              tag: element.tagName,
              id: element.id || 'no-id',
              class: element.className || 'no-class',
              display: style.display,
              visibility: style.visibility,
              opacity: style.opacity
            });
          }
          
          // Check for large elements that might be covering the viewport
          const rect = element.getBoundingClientRect();
          if (rect.width > viewportWidth * 0.9 && rect.height > viewportHeight * 0.9) {
            largeElements.push({
              tag: element.tagName,
              id: element.id || 'no-id',
              class: element.className || 'no-class',
              width: Math.round(rect.width),
              height: Math.round(rect.height),
              backgroundColor: style.backgroundColor,
              color: style.color
            });
          }
        }
        
        let output = '';
        
        // Report on hidden elements
        output += `<h3>Hidden Elements (${hiddenElements.length})</h3>`;
        if (hiddenElements.length > 0) {
          output += '<table><tr><th>Tag</th><th>ID</th><th>Class</th><th>Display</th><th>Visibility</th><th>Opacity</th></tr>';
          hiddenElements.slice(0, 20).forEach(el => {
            output += `<tr>
              <td>${el.tag}</td>
              <td>${el.id}</td>
              <td>${el.class}</td>
              <td>${el.display}</td>
              <td>${el.visibility}</td>
              <td>${el.opacity}</td>
            </tr>`;
          });
          output += '</table>';
          if (hiddenElements.length > 20) {
            output += `<p>Showing 20 of ${hiddenElements.length} hidden elements.</p>`;
          }
        } else {
          output += '<p>No hidden elements found.</p>';
        }
        
        // Report on large elements
        output += `<h3>Large Elements (${largeElements.length})</h3>`;
        if (largeElements.length > 0) {
          output += '<table><tr><th>Tag</th><th>ID</th><th>Class</th><th>Width</th><th>Height</th><th>Background</th><th>Color</th></tr>';
          largeElements.forEach(el => {
            output += `<tr>
              <td>${el.tag}</td>
              <td>${el.id}</td>
              <td>${el.class}</td>
              <td>${el.width}px</td>
              <td>${el.height}px</td>
              <td>${el.backgroundColor}</td>
              <td>${el.color}</td>
            </tr>`;
          });
          output += '</table>';
          
          if (largeElements.some(el => el.backgroundColor === 'rgb(0, 0, 0)' || el.backgroundColor === '#000000' || el.backgroundColor === 'black')) {
            output += '<div class="error">Found large elements with black background that might be causing the black screen issue.</div>';
          }
        } else {
          output += '<p>No large elements covering the viewport found.</p>';
        }
        
        results.innerHTML = output;
      } catch (e) {
        results.innerHTML = `<div class="error">Error checking element visibility: ${e.message}</div>`;
      }
    });
    
    // Z-Index Analysis
    document.getElementById('analyze-zindex').addEventListener('click', function() {
      const results = document.getElementById('zindex-results');
      results.innerHTML = '<p>Analyzing z-index values...</p>';
      
      try {
        const allElements = document.querySelectorAll('*');
        let zIndexElements = [];
        
        for (let i = 0; i < allElements.length; i++) {
          const element = allElements[i];
          const style = window.getComputedStyle(element);
          const zIndex = parseInt(style.zIndex);
          
          if (!isNaN(zIndex) && zIndex !== 0 && zIndex !== 'auto') {
            zIndexElements.push({
              tag: element.tagName,
              id: element.id || 'no-id',
              class: element.className || 'no-class',
              zIndex: zIndex,
              position: style.position,
              backgroundColor: style.backgroundColor,
              color: style.color
            });
          }
        }
        
        // Sort by z-index (highest first)
        zIndexElements.sort((a, b) => b.zIndex - a.zIndex);
        
        let output = `<h3>Elements with Z-Index (${zIndexElements.length})</h3>`;
        if (zIndexElements.length > 0) {
          output += '<table><tr><th>Z-Index</th><th>Tag</th><th>ID</th><th>Class</th><th>Position</th><th>Background</th><th>Color</th></tr>';
          zIndexElements.slice(0, 20).forEach(el => {
            output += `<tr>
              <td>${el.zIndex}</td>
              <td>${el.tag}</td>
              <td>${el.id}</td>
              <td>${el.class}</td>
              <td>${el.position}</td>
              <td>${el.backgroundColor}</td>
              <td>${el.color}</td>
            </tr>`;
          });
          output += '</table>';
          
          if (zIndexElements.length > 20) {
            output += `<p>Showing 20 of ${zIndexElements.length} elements with z-index.</p>`;
          }
          
          // Check for potential issues
          const highZIndex = zIndexElements.filter(el => el.zIndex > 1000);
          if (highZIndex.length > 0) {
            output += `<div class="warning">Found ${highZIndex.length} elements with very high z-index (>1000).</div>`;
          }
          
          const blackBgHighZ = zIndexElements.filter(el => 
            (el.backgroundColor === 'rgb(0, 0, 0)' || el.backgroundColor === '#000000' || el.backgroundColor === 'black') && 
            el.zIndex > 0
          );
          
          if (blackBgHighZ.length > 0) {
            output += `<div class="error">Found ${blackBgHighZ.length} elements with black background and positive z-index.</div>`;
          }
        } else {
          output += '<p>No elements with explicit z-index found.</p>';
        }
        
        results.innerHTML = output;
      } catch (e) {
        results.innerHTML = `<div class="error">Error analyzing z-index: ${e.message}</div>`;
      }
    });
    
    // Root Element Diagnostic
    document.getElementById('diagnose-root').addEventListener('click', function() {
      const results = document.getElementById('root-results');
      results.innerHTML = '<p>Diagnosing root element...</p>';
      
      try {
        const root = document.getElementById('root');
        
        if (!root) {
          results.innerHTML = '<div class="error">Root element (#root) not found!</div>';
          return;
        }
        
        const computedStyle = window.getComputedStyle(root);
        const rect = root.getBoundingClientRect();
        
        let output = '<h3>Root Element Properties</h3>';
        output += '<table>';
        output += `<tr><td>Tag Name</td><td>${root.tagName}</td></tr>`;
        output += `<tr><td>Child Nodes</td><td>${root.childNodes.length}</td></tr>`;
        output += `<tr><td>Dimensions</td><td>${Math.round(rect.width)}px Ã— ${Math.round(rect.height)}px</td></tr>`;
        output += `<tr><td>Position</td><td>Left: ${Math.round(rect.left)}px, Top: ${Math.round(rect.top)}px</td></tr>`;
        output += `<tr><td>Display</td><td>${computedStyle.display}</td></tr>`;
        output += `<tr><td>Visibility</td><td>${computedStyle.visibility}</td></tr>`;
        output += `<tr><td>Opacity</td><td>${computedStyle.opacity}</td></tr>`;
        output += `<tr><td>Background Color</td><td>${computedStyle.backgroundColor}</td></tr>`;
        output += `<tr><td>Color</td><td>${computedStyle.color}</td></tr>`;
        output += `<tr><td>Z-Index</td><td>${computedStyle.zIndex}</td></tr>`;
        output += `<tr><td>Position</td><td>${computedStyle.position}</td></tr>`;
        output += `<tr><td>Overflow</td><td>${computedStyle.overflow}</td></tr>`;
        output += '</table>';
        
        // Check for potential issues
        let issues = [];
        
        if (root.childNodes.length === 0) {
          issues.push('Root element has no child nodes. React may not be rendering.');
        }
        
        if (computedStyle.display === 'none') {
          issues.push('Root element has display: none.');
        }
        
        if (computedStyle.visibility === 'hidden') {
          issues.push('Root element has visibility: hidden.');
        }
        
        if (parseFloat(computedStyle.opacity) === 0) {
          issues.push('Root element has opacity: 0.');
        }
        
        if (rect.width === 0 || rect.height === 0) {
          issues.push('Root element has zero width or height.');
        }
        
        if (computedStyle.backgroundColor === 'rgb(0, 0, 0)' || computedStyle.backgroundColor === '#000000' || computedStyle.backgroundColor === 'black') {
          issues.push('Root element has a black background color.');
        }
        
        if (issues.length > 0) {
          output += '<h3>Potential Issues</h3>';
          output += '<ul>';
          issues.forEach(issue => {
            output += `<li class="error">${issue}</li>`;
          });
          output += '</ul>';
        } else {
          output += '<div class="success">No obvious issues found with the root element.</div>';
        }
        
        // Show root element content
        output += '<h3>Root Element Content</h3>';
        output += `<pre>${root.innerHTML.substring(0, 500)}${root.innerHTML.length > 500 ? '...' : ''}</pre>`;
        
        results.innerHTML = output;
      } catch (e) {
        results.innerHTML = `<div class="error">Error diagnosing root element: ${e.message}</div>`;
      }
    });
    
    // CSS Reset Test
    document.getElementById('reset-css').addEventListener('click', function() {
      const results = document.getElementById('reset-results');
      results.innerHTML = '<p>Resetting CSS...</p>';
      
      try {
        // Store original styles
        window.originalStyles = {};
        const root = document.getElementById('root');
        
        if (!root) {
          results.innerHTML = '<div class="error">Root element (#root) not found!</div>';
          return;
        }
        
        // Store original style
        window.originalStyles.rootStyle = root.getAttribute('style') || '';
        
        // Apply basic styles to ensure visibility
        root.setAttribute('style', 'display: block !important; visibility: visible !important; opacity: 1 !important; background-color: white !important; color: black !important; position: static !important; z-index: auto !important; width: 100% !important; height: auto !important; min-height: 300px !important; overflow: visible !important; border: 2px dashed red !important;');
        
        // Disable all stylesheets temporarily
        window.originalStyles.sheets = [];
        for (let i = 0; i < document.styleSheets.length; i++) {
          const sheet = document.styleSheets[i];
          window.originalStyles.sheets.push(sheet.disabled);
          sheet.disabled = true;
        }
        
        results.innerHTML = `
          <div class="success">CSS reset applied. If content is now visible, the issue is related to CSS.</div>
          <p>The root element has been styled with basic visible properties and all stylesheets have been temporarily disabled.</p>
          <p>Click "Restore CSS" to revert these changes.</p>
        `;
      } catch (e) {
        results.innerHTML = `<div class="error">Error resetting CSS: ${e.message}</div>`;
      }
    });
    
    document.getElementById('restore-css').addEventListener('click', function() {
      const results = document.getElementById('reset-results');
      results.innerHTML = '<p>Restoring CSS...</p>';
      
      try {
        if (!window.originalStyles) {
          results.innerHTML = '<div class="warning">No CSS reset has been applied yet.</div>';
          return;
        }
        
        const root = document.getElementById('root');
        
        if (!root) {
          results.innerHTML = '<div class="error">Root element (#root) not found!</div>';
          return;
        }
        
        // Restore root style
        if (window.originalStyles.rootStyle) {
          root.setAttribute('style', window.originalStyles.rootStyle);
        } else {
          root.removeAttribute('style');
        }
        
        // Re-enable stylesheets
        if (window.originalStyles.sheets) {
          for (let i = 0; i < document.styleSheets.length && i < window.originalStyles.sheets.length; i++) {
            document.styleSheets[i].disabled = window.originalStyles.sheets[i];
          }
        }
        
        results.innerHTML = '<div class="success">Original CSS restored.</div>';
      } catch (e) {
        results.innerHTML = `<div class="error">Error restoring CSS: ${e.message}</div>`;
      }
    });
    
    // Test React Rendering
    document.getElementById('test-react').addEventListener('click', function() {
      const results = document.getElementById('react-results');
      results.innerHTML = '<p>Testing React rendering...</p>';
      
      try {
        const container = document.getElementById('react-test-container');
        container.innerHTML = '';
        
        // Check if React and ReactDOM are available
        if (typeof React === 'undefined' || typeof ReactDOM === 'undefined') {
          results.innerHTML = '<div class="error">React and/or ReactDOM are not available. Make sure they are loaded.</div>';
          return;
        }
        
        // Create a simple React component
        const TestComponent = React.createElement('div', {
          style: {
            padding: '20px',
            backgroundColor: '#e7f7e7',
            border: '1px solid #28a745',
            borderRadius: '4px'
          }
        }, [
          React.createElement('h3', { key: 'title' }, 'Test React Component'),
          React.createElement('p', { key: 'text' }, 'If you can see this, React rendering is working correctly.')
        ]);
        
        // Render the component
        ReactDOM.render(TestComponent, container);
        
        // Check if rendering was successful
        if (container.innerHTML && container.querySelector('h3') && container.querySelector('p')) {
          results.innerHTML = '<div class="success">React rendering test successful! The test component was rendered correctly.</div>';
        } else {
          results.innerHTML = '<div class="error">React rendering test failed. The component did not render as expected.</div>';
        }
      } catch (e) {
        results.innerHTML = `<div class="error">Error testing React rendering: ${e.message}</div>`;
      }
    });
  </script>
</body>
</html>
